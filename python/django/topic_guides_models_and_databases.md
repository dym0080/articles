# [模型和数据库](https://docs.djangoproject.com/zh-hans/2.2/topics/db/)

## 模型

模型准确且唯一的描述了数据。它包含您储存的数据的重要字段和行为。一般来说，每一个模型都映射一张数据库表。

- 每个模型都是一个 `Python` 的类，这些类继承 `django.db.models.Model`
- 模型类的每个属性都相当于一个数据库的字段。
- 利用这些，`Django` 提供了一个自动生成访问数据库的 `API`；请参阅 [执行查询](https://docs.djangoproject.com/zh-hans/2.2/topics/db/queries/)。

### 关联关系

#### 多对一

定义一个多对一的关联关系，使用 `django.db.models.ForeignKey `类

#### 多对多

定义一个多对多的关联关系，使用 `django.db.models.ManyToManyField` 类。

如果你只是想要一个类似于记录披萨和配料之间混合和搭配的简单多对多关系，标准的 `ManyToManyField` 就足够你用了。然而，有的时候你可能会需要在两个模型的关系中记录更多的数据。

举例来讲，考虑一个需要跟踪音乐人属于哪个音乐组的应用程序。在人和他们所在的组之间有一个多对多关系，你可以使用 `ManyToManyField` 来代表这个关系。然而，你想要记录更多的信息在这样的关联关系当中，比如你想要记录某人是何时加入一个组的。

对于这些情况，`Django` 允许你指定用于控制多对多关系的模型。你可以在中间模型当中添加额外的字段。在实例化 `ManyToManyField` 的时候使用 through 参数指定多对多关系使用哪个中间模型。

> 中间模型就相当于关系表
 
#### 一对一

使用 `OneToOneField` 来定义一对一关系。

### 模型方法

在模型中添加自定义方法会给你的对象提供自定义的“行级”操作能力。

### 还需要加强理解的知识点

- Meta 继承
- 代理模型
- 对 `related_name` 和 `related_query_name` 要格外小心

## 执行查询

一旦创建 数据模型 后，`Django` 自动给予你一套数据库抽象 `API`，允许你创建，检索，更新和删除对象。

`Django` 数据库层只是一种访问数据库的接口，理解这点非常重要。

## 聚合
## 搜索
## 管理器

`Manager` 是一种接口，它赋予了 `Django` 模型操作数据库的能力。`Django` 应用中每个模型拥有至少一个 `Manager`。

## 执行原生 `SQL` 查询

`Django` 允许你用两种方式执行原生 `SQL` 查询：你可以使用 `Manager.raw()` 来 执行原生查询并返回模型实例，或者完全不用模型层 直接执行自定义 `SQL`。

## 数据库事务
## 多数据库
## 表空间（Tablespaces）
## 数据库连接优化
## 数据库工具
## 模型关联 API 用法示例